<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- add new -->
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="style.css">
   <!-- add new end -->

    <title>Document</title>
</head>
<body>


    <!-- new add -->


	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="chip">
			<i class='bx bxs-microchip'></i>
			<span class="text">Digital Library</span>
		</a>
		<ul class="side-menu">
			<li>
				<!-- <a href="#"> -->
					<!-- <i class='bx bxs-cog' ></i>
					<span class="text">Settings</span> -->
				<!-- </a> -->
			</li>
			<li>
				<!-- <a href="#" class="logout">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a> -->
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<form action="#">
				<div class="form-input">
					<!-- <input type="search" placeholder="Search..."> -->
					<!-- <button type="submit" class="search-btn"><i class='bx bx-search' ></i></button> -->
                    <h1></h1>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<!-- <a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">8</span>
			</a> -->
			<!-- <a href="#" class="profile">
				<img src="img/people.png">
			</a> -->
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<!-- <h1>Dashboard</h1> -->
					<ul class="breadcrumb">
						<!-- <li>
							<a href="#">Dashboard</a>
                          

						</li> -->
						<!-- <li><i class='bx bx-chevron-right' ></i></li>
						<li>
							<a class="active" href="#">Home</a>
						</li> -->
					</ul>
				</div>
			</div>

			<ul class="box-info">
				<li>

					<span class="text">
                        <h3>LIGHT1</h3>

						<button id="lightoff" type="submit" style="cursor: pointer; background-color:greenyellow ; width:8vh;">OFF</button>
						<button id="lighton"  type="submit" style=" cursor: pointer; background-color:greenyellow ;width:8vh;">ON</button>
					</span>

				</li>
				<li>
					<span class="text">

						<h3>LIGHT2</h3>
                      

						<button type="submit" style="cursor: pointer; background-color:greenyellow ; width:8vh;">OFF</button>
						<button  type="submit" style=" cursor: pointer; background-color:greenyellow ;width:8vh;">ON</button>
					</span>
				</li>
			</ul>


			<div class="table-data">
				<div class="order">
					<div class="head">
						<h3>Student Count</h3>
					</div>
					<table>
						<thead>
							<tr>
								<h1 id="count"></h1>
							</tr>
						</thead>
						<tbody>
							
							
						</tbody>
					</table>
				</div>
				<d iv class="todo">
					<div class="head">
						<h3>LOKER BOX</h3>

					</div>
					<ul class="todo-list" >
						<li class="completed" id="l1">
						

						<p >LOKER1  
								<p id="loker1" style="color:rgb(20, 20, 20) ; font-size: 20px"></p> </p>
						</li>
						 <li class="completed"id="l2">
							<p>LOKER2  
								<p id="loker2" style="color:rgb(6, 5, 5); font-size: 20px"></p> </p>
						</li>
					</ul>
				</div>
			</div>
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->

    
    <!-- new add  end -->

     <!-- fire base connection -->
 
   <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCj1YlqwWvWEzcxJfwnrbXcLqPg3_bzK9w",
    authDomain: "test-5136c.firebaseapp.com",
    databaseURL: "https://test-5136c-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "test-5136c",
    storageBucket: "test-5136c.appspot.com",
    messagingSenderId: "136981540473",
    appId: "1:136981540473:web:b1163fd3c4005c988feea8"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  import {getDatabase,ref,set,get,child,update,remove}
  from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

  const db =getDatabase();


//   <!-- fire base connection end -->



  var loker1=document.getElementById("loker1");
  var loker2=document.getElementById("loker2");
  var loker1inner=document.getElementById("l1");
  var loker2inner=document.getElementById("l2");
  var counter=document.getElementById("count");
  var lighton=document.getElementById("lighton");
  var lightoff=document.getElementById("lightoff");

//   for insert data in database



  function lightOn(){
    lighton.style.backgroundColor = 'red';
    lightoff.style.backgroundColor = 'green';
    


set(ref(db,"Test/status"),{
     bool:1
})
.catch((error)=>{
    alert("NOT ok"+error);

});

}

function lightOff(){

    lighton.style.backgroundColor = 'green';
    lightoff.style.backgroundColor = 'red';


set(ref(db,"Test/status"),{
    bool:0
  
})
.catch((error)=>{
    alert("NOT ok"+error);

});

}





  function SelectData1(){
    const dbref =ref(db);
    get(child(dbref,"Test/BOX-ONE")).then((snapshot)=>{
        if(snapshot.exists()){
            var re=snapshot.val();
            loker1.innerHTML=snapshot.val();
            if(re=="BOX ONE IS EMPTY"){
                loker1inner.style.backgroundColor = "green";
            }
            else{

                loker1inner.style.backgroundColor = "Red";

            }
            

        }
       

    })
    .catch((error)=>{
        alert("NOT ok"+error);

    });

  }
  
  function SelectData2(){
    const dbref =ref(db);
    get(child(dbref,"Test/BOX-TWO")).then((snapshot)=>{
        if(snapshot.exists()){
            var re=snapshot.val();
            loker2.innerHTML=snapshot.val();

            if(re=="BOX TWO IS EMPTY"){
                loker2inner.style.backgroundColor = "green";
            }
            else{
                loker2inner.style.backgroundColor = "Red";

            }

    }
})
    .catch((error)=>{
        alert("NOT ok"+error);

    });

  }

  function countStudent(){
    const dbref =ref(db);
    get(child(dbref,"Test/count")).then((snapshot)=>{
        if(snapshot.exists()){
            var re=snapshot.val();
            counter.innerHTML=snapshot.val();

           

    }
})
    .catch((error)=>{
        alert("NOT ok"+error);

    });

  }


  
  setInterval(SelectData1,1000);
  setInterval(SelectData2,1000);
  setInterval(countStudent,1000);



//   btn.addEventListener('click',inter);
//   btn1.addEventListener('click',SelectData1);
//   btn2.addEventListener('click',SelectData2);
  lighton.addEventListener('click',lightOn);
  lightoff.addEventListener('click',lightOff);


</script>

<script src="script.js"></script>

</body>
</html>